{
    "name": "Workshop Dev Container",
    "image": "mcr.microsoft.com/devcontainers/javascript-node:latest",
    "features": {
      "ghcr.io/devcontainers/features/github-cli:1": {}
    },
    "postCreateCommand": "npm install -g @adobe/aio-cli",
    "customizations": {
      "vscode": {
        "extensions": [
          "dbaeumer.vscode-eslint",
          "ms-vscode.vscode-typescript-next",
          "ms-vscode-remote.remote-containers"
        ],
        "settings": {
          "remote.localPortHost": "allInterfaces",
          "security.workspace.trust.startupPrompt": "never",
          "security.workspace.trust.enabled": true,
          "security.workspace.trust.untrustedFiles": "open",
          "security.workspace.trust.untrustedActivation": "open"
        }
      }
    },
    "forwardPorts": [37921, 41851, 9080, 9229],
    "portsAttributes": {
      "37921": {
        "label": "AIO Auth",
        "onAutoForward": "notify"
      },
      "41851": {
        "label": "AIO Auth Callback",
        "onAutoForward": "notify"
      },
      "9080": {
        "label": "Development Server",
        "onAutoForward": "notify"
      }
    },
    "remoteEnv": {
      "AIO_CONFIG_FILE_DISABLE_CONSOLE_KEY_PROMPT": "true",
      "AIO_CONFIG_FILE": "/home/node/.aio"
    },
    "mounts": [
      "source=${localWorkspaceFolder}/.vscode/trust-domains.json,target=/home/node/.vscode-server/data/Machine/settings.json,type=bind,consistency=cached",
      "source=${localEnv:HOME}${localEnv:USERPROFILE}/.aio,target=/home/node/.aio,type=bind,consistency=cached"
    ],
    "postStartCommand": "echo \"When authenticating with 'aio login', use the codespace URL with port 41851 rather than localhost. Example: https://yourcodespace-username.github.dev:41851\""
}
